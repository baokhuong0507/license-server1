<!-- app/templates/partials/keys_table_rows.html -->

<!-- 
    Tệp này sẽ được render với một biến ngữ cảnh tên là 'key'.
    Nó sẽ tạo ra một hàng <tr> cho bảng.
-->
<tr id="key-row-{{ key.id }}">
    <td>{{ key.id }}</td>
    <td><code>{{ key.key }}</code></td>
    <td>
        {% if key.status == 'unused' %}
        <span class="tag is-light">Unused</span>
        {% elif key.status == 'active' %}
        <span class="tag is-success">Active</span>
        {% elif key.status == 'expired' %}
        <span class="tag is-danger">Expired</span>
        {% else %}
        <span class="tag">{{ key.status }}</span>
        {% endif %}
    </td>
    <td>{{ key.expiry_date.strftime('%Y-%m-%d %H:%M') if key.expiry_date else 'N/A' }}</td>
    <td style="text-align: center;">
        <!-- Nút này chỉ hiển thị khi key chưa được sử dụng -->
        {% if key.status == 'unused' %}
        <button 
            class="button is-small is-info"
            hx-post="/admin/keys/{{ key.id }}/activate" 
            hx-target="#key-row-{{ key.id }}" 
            hx-swap="outerHTML"
            title="Activate this key">
            Activate
        </button>
        {% endif %}
    </td>
</tr>